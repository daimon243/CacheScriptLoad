<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=yes, width=device-width">
  <title>Ws2Pg — Index</title>
  <link rel="shortcut icon" href="/favicon.ico">

  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

  <link type="text/css" rel="stylesheet" href="styles/site.oblivion.css">
</head>
<body>
<div class="container-fluid">
  <div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
      <a class="brand" href="index.html">Ws2Pg</a>
      <ul class="nav">
        
        <li class="dropdown">
          <a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="CacheScriptLoad.html">CacheScriptLoad</a>
            </li>
            

          </ul>
        </li>
        
        <li class="dropdown">
          <a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
            class="caret"></b></a>

          <ul class="dropdown-menu ">
            
            <li>
              <a href="global.html#info">info</a>
            </li>
            

          </ul>
        </li>
        
      </ul>
    </div>
  </div>

  <div class="row-fluid">

    
    <div class="span3">
      <div id="toc"></div>
    </div>
    

    
    <div class="span9">
      
        <div id="main">
          


	
	<span class="page-title">Index</span>
	
	












	
	





    <section class="readme-section">
        <article><h1>Load and cache scripts and styles</h1><p>The given script is intended for loading and caching js and css files in local storage.</p>
<p>Tested with Chrome, Firefox, Opera, Safari, IE 7,8,9,10, Edge</p>
<p>The cache is controlled based on the version of the flies and the variants of the caching.</p>
<h3>There are three options for caching files:</h3><pre class="prettyprint source"><code>0: no cache
1: cache, but if the file is not in the cache or the version of the file does not match,
    then the file is downloaded twice, once with a regular browser method and the second time
    through Ajax in the cache;
2: cache, but use only through the cache. First, the file is loaded into the cache, and then
    injected into the DOM. Thus, the file is loaded only once.</code></pre><p>Variants 0 and 1 are used for the convenience of debugging development tools in browsers,
option 2 for production.        </p>
<p>The load () method, which directly starts the boot process, takes two parameters, two configurations
whose structure is identical, but if both parameters are passed, then the configs first merging, and
in the resulting config the parameters in the first config have a higher weight, i.e. if the equals
keys in first and second config, the values ​​are taken from the first configuration, if the keys are
different then the resulting configuration will have the data of both the first and second configurations.
This feature is implemented to ensure the scalability of the project, of which the script is a part.         </p>
<p>Loading is carried out in two stages. At the first stage, a file with versions of scripts and styles is
loaded, in the second stage files with versions of which do not correspond to the versions of files in the
cache are downloaded.</p>
<p>The order of file downloads can be changed by specifying files in the properties after which files can
start the download.</p>
<p>At the end of the download, the callback () specified in the configuration file is executed.</p>
<p>The source code is written in accordance with the requirements of es6. This implementation was written
to use obfuscation of code closure compiler from google, with ADVANCED_OPTIMIZATIONS, es6 -&gt; es5.</p>
<h3>simple usage:</h3><pre class="prettyprint source"><code>&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;title>Test Load And Cache Scripts And Styles&lt;/title>
&lt;script src=&quot;release/loader-min.js&quot;>&lt;/script>
&lt;script type=&quot;text/javascript&quot;>
loader.load({
  modules: {
    conf1: {
      load: {
        url: 'tests/loaderconf.js',
        version: '0',
        cache: 0
      }
    }
  },
  onLoad: () => {
    console.log('config loaded ', loader.getcfg());
    loader.load(loaderconf);
  }
}, null);
&lt;/script>
&lt;/head>
&lt;body>
&lt;/body>
&lt;/html></code></pre><h3>example tests/loaderconf.js</h3><pre class="prettyprint source"><code>let loaderconf = {
  modules: {
    script1: {
        load: {
            url: 'tests/script1.js',
            version: '0.0.1',
            cache: 0
        }
    },
    script2: {
        load: {
            url: 'tests/script2.js',
            version: '0.0.1',
            cache: 1
        }
    },
    script3: {
        load: {
            url: 'tests/script3.js',
            version: '0.0.1',
            cache: 2,
            after:[ 'script4', 'script2' ]
        }
    },
    script4: {
        load: {
            url: 'tests/script4.js',
            version: '0.0.1',
            cache: 0
        }
    },
    style1: {
        load: {
            url: 'styles/test.css',
            version: '0.0.1',
            cache: 0
        }
    },
  },
  onLoad: () => {
    console.log('call callback !!!');
    console.log('load end ', window.loader.getcfg());
    delete window.loader;
  }
};</code></pre><hr>
<p>More detailed information can be found in the folder doc.</p>
<hr>
<h3>License</h3><p>ISC © daimon243@gmail.com, Dmitry Teikovtcev, Dnepr, Ukraine</p></article>
    </section>







        </div>

        <div class="clearfix"></div>
        <footer>
          
          use, repost these materials only with reference to the author daimon243@gmail.com, Dmitry Teikovtsev, Dnepr, Ukraine
          <br />
          
          
    <span class="copyright">
    copy right daimon
    </span>
          <br />
          
    <span class="jsdoc-message">
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc" target="_blank">JSDoc 3.4.3</a>
    on 2017-03-24T22:57:15+02:00
    </span>
        </footer>
      </div>

      <br clear="both">
    </div>

  </div>
  <!--<script src="scripts/sunlight.js"></script>-->
  <script src="scripts/docstrap.lib.js"></script>
  <script src="scripts/bootstrap-dropdown.js"></script>
  <script src="scripts/toc.js"></script>

  <script>
    $( function () {
      $( "[id*='$']" ).each( function () {
        var $this = $( this );

        $this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
      } );

      $( "#toc" ).toc( {
        anchorName  : function ( i, heading, prefix ) {
          return $( heading ).attr( "id" ) || ( prefix + i );
        },
        selectors   : "h1,h2,h3,h4",
        showAndHide : false,
        scrollTo    : "100px"
      } );

      $( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
      $( "#main span[id^='toc']" ).addClass( "toc-shim" );
      $( '.dropdown-toggle' ).dropdown();
//      $( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

      $( ".tutorial-section pre, .readme-section pre" ).each( function () {
        var $this = $( this );

        var example = $this.find( "code" );
        exampleText = example.html();
        var lang = /{@lang (.*?)}/.exec( exampleText );
        if ( lang && lang[1] ) {
          exampleText = exampleText.replace( lang[0], "" );
          example.html( exampleText );
          lang = lang[1];
        } else {
          lang = "javascript";
        }

        if ( lang ) {

          $this
            .addClass( "sunlight-highlight-" + lang )
            .addClass( "linenums" )
            .html( example.html() );

        }
      } );

      Sunlight.highlightAll( {
        lineNumbers : true,
        showMenu : true,
        enableDoclinks : true
      } );
    } );
   </script>



  <!--Navigation and Symbol Display-->
  


  <!--Google Analytics-->
  

</body>
</html>